<section class="container">
  <div>
    <h2>Property Details</h2>
    <hr>
    <div class="row">
      <ul ng-repeat="selected in groupsPropsShow.gps.listing">
        <li><img ng-src="{{selected.image_645_430_url}}" class="propertyimage"></li>
        <li><strong>Bedrooms: </strong>{{selected.num_bedrooms}}</li>
        <li><strong>Property Type: </strong>{{selected.property_type}}</li>
        <li><strong>Price: </strong>Â£{{selected.rental_prices.per_month}} ppm</li>
        <li class="address"><strong>Address: </strong>{{selected.displayable_address}}</li>
        <div>
          <li class="description">{{selected.description}}</li><br>
        </div>
        <button ng-click="groupsPropsShow.deleteProperty(selected)" ng-if="main.isAuthenticated()" class="deleteproperty">Delete Property</button>
      </ul>
    </div>
    <hr>
    <div ng-repeat="selected in groupsPropsShow.gps.listing">
      <ul>
        <h3>Agency Info</h3>
        <li><strong>Company: </strong>{{selected.agent_name}}</li>
        <li><strong>Contact: </strong><a href="tel:{{selected.agent_phone}}" class="number">{{selected.agent_phone}}</a></li>
      </ul>
    </div>
    <hr>
    <h3>Ratings</h3>
    <div ng-repeat="rating in groupsPropsShow.prop.rating track by $index" class="col-sm-4 col-md-4 col-lg-4">
      <strong>{{ rating.createdBy.username }}</strong>
        <span uib-rating ng-model="rating.opinion" max="groupsPropsShow.max" read-only="groupsPropsShow.isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null"></span>
        <button type="button" ng-click="groupsPropsShow.deleteRating(rating)" class="close" aria-label="Close"><span aria-hidden="true" >&times;</span>
        </button>
    </div>
    <div class="ratings">
      <form ng-submit="groupsPropsShow.addRating()" ng-if="main.isAuthenticated()">
        <label for="rating"></label>
        <span uib-rating ng-model="groupsPropsShow.newRating.opinion" max="groupsPropsShow.max" read-only="groupsPropsShow.isReadonlyfalse" on-hover="hoveringOver(value)" on-leave="overStar = null" class="form-control" name="rating" id="rating"></span>
        <button class="addimage">Add Rating</button>
      </form>
    </div>
    <hr>
    <div>
      <div class="col-sm-6 col-md-6 col-lg-6 gallery">
        <h3>Images</h3>
        <div class ="row">
            <div ng-repeat="image in groupsPropsShow.prop.images track by $index" class="col-sm-4 col-md-4 col-lg-4">
              <img ng-click="groupsPropsShow.openModal(image)" ng-src="{{ image.imageSRC }}" class="userimages img-fluid img-thumbnail">
              <button ng-click="groupsPropsShow.deleteImage(image)" class="deleteimage">Delete</button>
            </div>
        </div>
        <div class="addimages row">
          <form ng-submit="groupsPropsShow.addImage()" ng-if="main.isAuthenticated()" class="form-group">
            <input type="file" base64 name="base64" ng-model="groupsPropsShow.newImage.base64" class="base64 form-control">
            <button class="addimage smaller">Add Image</button>
          </form>
        </div>
      </div>
      <div class="col-sm-6 col-md-6 col-lg-6 gallery">
        <div class="row">
          <h3>Notes</h3>
          <div ng-repeat="note in groupsPropsShow.prop.notes track by $index" class="col-sm-3 col-md-3 col-lg-3">
            <strong>{{ note.createdBy.username }}</strong> - {{ note.text }}
            <button ng-click="groupsPropsShow.deleteNote(note)" class="smaller">Delete</button>
          </div>
        </div>
        <div class="row">
          <form ng-submit="groupsPropsShow.addNote()" ng-if="main.isAuthenticated()">
            <h3>Add Comments</h3>
            <textarea ng-model="groupsPropsShow.newNote.text"></textarea><br>
            <button class="addcomment">Post</button>
          </form>
        </div>
      </div>
    </div>
   <hr>
   <div class="map container" ng-repeat="selected in groupsPropsShow.gps.listing">
     <ng-map center="[{{selected.latitude}}, {{selected.longitude}}]" zoom="13" scrollwheel="false">
       <marker position="[{{selected.latitude}}, {{selected.longitude}}]" animation="DROP"></marker>
     </ng-map>
   </div>
  </div>
</section>
